---
title: "Problemas de Integração SIP"
icon: "phone-volume"
description: "Solucione problemas de conexão e configuração de SIP trunk"
---

Este guia ajuda a resolver problemas comuns de integração SIP ao conectar seu provedor SIP à **OmniTech**.

## Estratégia de Testes

1. **Teste primeiro chamadas de saída (Outbound)** – mais simples de configurar  
2. **Depois teste chamadas de entrada (Inbound)** – somente após o outbound funcionar

## Problemas de SIP Outbound

### Problemas de Conexão

**SIP trunk não conecta para chamadas de saída:**

1. **Verifique as credenciais SIP** – usuário, senha e servidor  
2. **Seleção do tipo de telefone** – confirme com o provedor o tipo correto  
3. **Configuração de IP Fixo** – normalmente deve estar habilitada com o IP do provedor  
4. **Configurações do provedor** – valide codec, transporte e portas

### Problemas de Registro SIP

**Importante:** A plataforma **OmniTech**:
- **NÃO envia mensagens SIP REGISTER** para o provedor  
- **NÃO exige receber SIP REGISTER** do provedor  
- Utiliza **autenticação direta por chamada**

### Testando Outbound

1. Configure o SIP trunk  
2. **Faça uma chamada de teste direta** pela plataforma  
3. Verifique os logs de chamadas para erros

## Problemas de SIP Inbound

### Configuração de Autenticação

**Para chamadas de entrada:**

1. **Use autenticação por IP** – em vez de usuário/senha  
2. **Libere (whitelist) os IPs do provedor** – adicione TODOS na plataforma  
3. **Configuração no provedor – IMPORTANTE**
   - **Use nosso domínio FQDN** para roteamento (NÃO use IP de saída)
   - **Envie para o domínio**, garantindo roteamento correto
   - **NÃO envie diretamente para IP**, isso causa falhas de roteamento

### Problemas Comuns de Inbound

**Chamadas não chegam ao assistente:**
- Confirme que todos os IPs do provedor estão liberados
- Garanta que o provedor envia para o domínio FQDN (não para IP)
- Verifique o formato do número de destino

## Problemas Gerais

**Problemas de rede:**
- Verifique a conectividade com a internet
- Confirme que o firewall não está bloqueando tráfego SIP

**Compatibilidade do provedor:**
- Confirme que o provedor suporta chamadas diretas (sem registro)
- Verifique suporte à autenticação por IP

## Checklist de Testes

### Antes de Contatar o Suporte

1. **Teste Outbound:**
   - [ ] Credenciais verificadas  
   - [ ] Tipo de telefone selecionado corretamente  
   - [ ] IP fixo habilitado com o IP do provedor  
   - [ ] Chamada de teste direta realizada  

2. **Teste Inbound:**
   - [ ] Autenticação por IP configurada  
   - [ ] Todos os IPs do provedor liberados na plataforma  
   - [ ] Provedor configurado para enviar ao domínio FQDN (não IP direto)  
   - [ ] Chamada de teste a partir de número externo  

3. **Geral:**
   - [ ] Conectividade de rede verificada  

## FAQ

### Transferência de Chamada Não Funciona

**P: Por que a função de Transferência de Chamada não está funcionando?**

**R:** Se a transferência falhar, tente as soluções abaixo:

1. **Verifique as Configurações de Transferência SIP:**
   - Configure a transferência para o modo "Advanced"
   - Utilize o formato SIP URI: `sip:numero@sip-servidor`
   - Exemplo: `sip:+1234567890@sip.provedor.com:5060`

2. **Confirme Suporte do Provedor:**
   - Verifique se o provedor suporta SIP REFER
   - Confirme se a função de transferência está habilitada na conta
   - Alguns provedores exigem configurações específicas

3. **Teste Diferentes Formatos:**
   - Com porta: `sip:+1234567890@sip-servidor:5060`
   - Sem porta: `sip:+1234567890@sip-servidor`
   - Formato simples: `sip:+1234567890`

4. **Verifique o Destino:**
   - Confirme se o número de destino atende chamadas normalmente
   - Teste o número manualmente
   - Verifique bloqueios ou restrições

5. **Problemas Comuns:**
   - Provedor não suporta SIP REFER
   - Formato SIP URI incorreto
   - Firewall ou rede bloqueando a transferência
   - Número de destino não atende

**Passos de diagnóstico:**
1. Teste primeiro com um número conhecido
2. Experimente diferentes formatos de SIP URI
3. Confirme com o provedor o suporte à transferência
4. Analise os logs de chamadas para mensagens de erro específicas

## Obtendo Ajuda

**Ao contatar o suporte, informe:**
- Mensagens de erro dos logs de chamadas
- Configuração do SIP trunk
- Resultados dos testes (outbound e inbound)
- Detalhes da tentativa de transferência e formato SIP URI utilizado
