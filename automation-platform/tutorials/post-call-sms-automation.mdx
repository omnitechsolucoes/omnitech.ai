---
title: "Automação de SMS Pós-Chamada"
icon: "message"
description: "Aprenda como enviar automaticamente mensagens SMS para clientes após o término de chamadas com IA"
---
Este tutorial mostra como configurar uma automação que envia mensagens SMS automaticamente para clientes após o término de chamadas telefônicas com IA, com lógica condicional baseada nos resultados da chamada.

<iframe
  width="100%"
  height="400"
  src="https://www.youtube.com/@OMNITECHSOLUCOESDIGITAIS"
  title="Tutorial: Como enviar um SMS após o término de chamada com IA"
  frameBorder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowFullScreen></iframe>

## O Que Você Vai Aprender
- Configurar gatilhos de automação via webhook pós-chamada
- Criar lógica condicional baseada no sucesso da chamada
- Mapear dados da chamada para o conteúdo do SMS
- Testar automações pós-chamada com chamadas reais
- Melhores práticas para mensagens de acompanhamento via SMS

## Pré-requisitos
- Assistente de IA configurado com variáveis pós-chamada
- Número de telefone com SMS habilitado na sua plataforma
- Conhecimento básico de fluxos de automação
- Acesso à funcionalidade de teste de chamadas

## Passo 1: Criar Fluxo de Automação Pós-Chamada
Vamos começar criando uma automação que é acionada quando uma chamada telefônica termina.

<video
  autoPlay
  muted
  loop
  playsinline
  src="/resources/tutorials/post-call-sms/01-create-new-flow.mp4"></video>

1. **Navegue até a Plataforma de Automação**
2. **Crie um novo fluxo** do zero
3. **Pesquise pela sua plataforma de chamadas** na seção de gatilhos
4. **Selecione o gatilho "Phone Call Ended"**
   - Este gatilho é ativado quando qualquer chamada para o assistente selecionado é concluída

## Passo 2: Configurar Assistente e Webhook

<video
  autoPlay
  muted
  loop
  playsinline
  src="/resources/tutorials/post-call-sms/03-select-assistant.mp4"></video>

1. **Selecione o assistente** que deseja automatizar
   - Cada assistente pode ter apenas uma automação de "phone call ended"
   - Todas as chamadas para este assistente passarão por esta automação
2. **Clique em "Test Trigger"** para gerar o webhook
   - Isso cria uma URL de webhook em segundo plano
   - O webhook é automaticamente salvo nas configurações do seu assistente

## Passo 3: Verificar Configuração do Webhook

<video
  autoPlay
  muted
  loop
  playsinline
  src="/resources/tutorials/post-call-sms/05-check-assistant-webhook.mp4"></video>

1. **Abra uma nova aba** e navegue até o seu assistente
2. **Vá para a terceira aba** "Post-call Actions"
3. **Verifique se a URL do webhook** foi adicionada automaticamente

<Frame>
  <img src="/resources/tutorials/post-call-sms/06-webhook-settings.png" alt="Webhook configuration settings" />
</Frame>

4. **Revise as configurações do webhook:**
   - **Enabled**: O webhook será acionado após as chamadas
   - **Completed calls only**: Apenas chamadas bem-sucedidas acionam a automação
   - **All calls**: Altere para "No" se quiser que todas as chamadas (incluindo falhas) acionem
<Frame>
  <img src="/resources/tutorials/post-call-sms/07-post-call-variables.png" alt="Post-call variables configuration" />
</Frame>

5. **Revise as variáveis pós-chamada:**
   - **status**: Booleano (true/false) que indica se o objetivo da chamada foi alcançado
   - **summary**: Resumo em texto da conversa da chamada
   - Essas variáveis são extraídas pela IA após cada chamada

## Passo 4: Gerar Dados de Chamada de Teste
Para configurar nossa automação corretamente, precisamos de dados reais de chamada. Vamos fazer uma chamada de teste para gerar as variáveis pós-chamada.

<Frame>
  <img src="/resources/tutorials/post-call-sms/08-set-test-values.png" alt="Setting test values for call variables" />
</Frame>

1. **Defina valores reais** nas variáveis de chamada do seu assistente:
   - **Defina seu nome e e-mail** para dados de teste realistas
   - Esses serão os valores padrão ao testar a partir do assistente

<video
  autoPlay
  muted
  loop
  playsinline
  src="/resources/tutorials/post-call-sms/09-make-test-call.mp4"></video>

2. **Faça uma chamada de teste para gerar dados do webhook:**
   - Clique em **"Speak to Assistant"** → **"Phone Call"**
   - **Atenda quando seu assistente ligar para você**
   - **Responda de forma positiva** para garantir que a variável `status` fique `true`
   - **Complete o objetivo da chamada** durante a conversa
   - **Encerre a chamada naturalmente**

<Note>
Em uma situação real, o assistente usará os dados atribuídos ao lead. Para testes, ele usa os valores padrão que você acabou de definir.
</Note>

<video
  autoPlay
  muted
  loop
  playsinline
  src="/resources/tutorials/post-call-sms/10-check-call-results.mp4"></video>

3. **Verifique os resultados da chamada e a extração de variáveis:**
   - **Navegue até a lista de chamadas** e encontre a chamada recente
   - **Clique na chamada** para ver os detalhes
   - **Confirme que a variável `status` é `true`** (objetivo da chamada alcançado)
   - **Revise o `summary` extraído** – contém o resumo gerado pela IA
   - Essas variáveis são extraídas após cada chamada com base em:
     - Transcrição da chamada
     - Descrições das variáveis
     - Tipos das variáveis (Boolean para status)
     - Contexto do prompt do sistema

<Note>
As variáveis após uma chamada estão sendo extraídas. Você pode atualizar a página após cerca de um minuto e então verá as variáveis extraídas.
</Note>

## Passo 5: Configurar Automação com Dados da Chamada

<video
  autoPlay
  muted
  loop
  playsinline
  src="/resources/tutorials/post-call-sms/11-received-call-data.mp4"></video>

1. **Retorne à aba da sua automação**
2. **Verifique se você recebeu os dados da chamada** do gatilho de teste
   - Você deve ver os dados do webhook porque clicou em "Test Trigger" e depois fez uma chamada
   - A automação recebeu a requisição após o término da chamada e extração das variáveis
3. **Método alternativo – reenviar dados do webhook a partir de chamadas existentes:**

<video
  autoPlay
  muted
  loop
  playsinline
  src="/resources/tutorials/post-call-sms/12-resend-webhook.mp4"></video>

   - Se precisar testar com dados de chamadas diferentes, você pode reutilizar qualquer chamada existente
   - **Clique novamente em "Test Trigger"** na sua automação
   - **Vá para qualquer chamada concluída** na sua plataforma
   - **Clique em "Resend Webhook"** para enviar os dados daquela chamada para sua automação
   - **Retorne à aba da automação** para ver os dados atualizados

### Adicionando Novas Variáveis Pós-Chamada

<Note>
Se precisar adicionar uma nova variável pós-chamada após criar a automação, siga este processo para atualizar sua automação com os novos dados da variável.
</Note>

<video
  autoPlay
  muted
  loop
  playsinline
  src="/resources/tutorials/post-call-sms/add-variable.mp4"></video>

1. **Defina a nova variável no seu assistente:**
   - Vá para configurações do assistente → aba "Post-call Actions"
   - Adicione sua nova variável pós-chamada (nome, tipo, descrição)
   - **Salve o assistente**
2. **Atualize a automação com os novos dados da variável:**
   - **Retorne à sua automação**
   - **Clique em "Test Trigger"** para preparar para novos dados do webhook
3. **Reavalie uma chamada existente:**

<video
  autoPlay
  muted
  loop
  playsinline
  src="/resources/tutorials/post-call-sms/re-evaluate.mp4"></video>

   - **Vá para qualquer chamada concluída** deste assistente
   - **Clique em "Re-evaluate"** para extrair a nova variável daquela chamada
   - **Aguarde o processamento** ser concluído
4. **Envie os dados atualizados para a automação:**
   - **Clique em "Resend Webhook"** na mesma chamada
   - **Retorne à aba da automação**
   - **Verifique que a nova variável** agora está disponível nos dados da sua automação

<Tip>
Este recurso de reenvio é útil para testar diferentes cenários sem precisar fazer novas chamadas toda vez.
</Tip>

## Passo 6: Adicionar Lógica Condicional para SMS Baseado no Objetivo
Queremos enviar SMS apenas quando o objetivo da chamada for alcançado, então precisamos de um branch de decisão na automação.

<video
  autoPlay
  muted
  loop
  playsinline
  src="/resources/tutorials/post-call-sms/13-add-branch.mp4"></video>

1. **Clique no sinal de "+"** para adicionar um novo passo
2. **Pesquise por "Branch"** nas opções de controle de fluxo
3. **Selecione o componente Branch**

<video
  autoPlay
  muted
  loop
  playsinline
  src="/resources/tutorials/post-call-sms/14-configure-branch-condition.mp4"></video>

4. **Configure a condição do branch:**
   - **Uma barra lateral aparecerá** para configurar a condição
   - **Pesquise pela variável `status`** nos dados da chamada
   - **Selecione a variável `status`**
   - **Escolha "Boolean is true"** como tipo de condição
   - Isso cria **dois caminhos**: **True (esquerda)** e **False (direita)**

<Note>
A variável `status` é Booleana (true/false). Após cada chamada, essa variável será extraída e ficará `true` se o objetivo da chamada foi alcançado, caso contrário `false`. O branch executará o caminho "True" quando o objetivo foi alcançado e o "False" quando não foi.
</Note>

**Entendendo a Lógica:**
- **Caminho True (esquerda)**: Ações para chamadas bem-sucedidas (objetivo alcançado)
- **Caminho False (direita)**: Ações para chamadas não bem-sucedidas (objetivo não alcançado)

## Passo 7: Configurar Ação de SMS para Chamadas Bem-sucedidas
Agora vamos adicionar a ação de SMS que é acionada quando o objetivo da chamada é alcançado.

<video
  autoPlay
  muted
  loop
  playsinline
  src="/resources/tutorials/post-call-sms/15-add-sms-action.mp4"></video>

1. **No branch "True"** (chamadas bem-sucedidas), **clique no sinal de "+"**
2. **Pesquise pela sua plataforma de chamadas**
3. **Selecione "Send SMS to Customer"**

<video
  autoPlay
  muted
  loop
  playsinline
  src="/resources/tutorials/post-call-sms/16-select-phone-number.mp4"></video>

4. **Selecione um número de telefone com SMS habilitado** da sua plataforma:
   - **Escolha um número existente** que você tem na plataforma
   - Este número será o **remetente das suas mensagens SMS**
   - Certifique-se de que o número tem capacidades de SMS ativadas

## Passo 8: Mapear Conteúdo do SMS e Destinatário

<video
  autoPlay
  muted
  loop
  playsinline
  src="/resources/tutorials/post-call-sms/17-map-customer-phone.mp4"></video>

1. **Configure o destinatário do SMS:**
   - **Clique no campo "Customer Phone"**
   - **Uma barra lateral abrirá** mostrando os dados disponíveis da chamada
   - **Pesquise pela variável que contém o número de telefone**
   - **Selecione o número de telefone** dos dados da chamada
   - **Clique em "Insert"** para mapear o campo

<video
  autoPlay
  muted
  loop
  playsinline
  src="/resources/tutorials/post-call-sms/18-configure-sms-content.mp4"></video>

2. **Configure o conteúdo da mensagem SMS:**
   - **Vá para o campo de texto da mensagem**
   - **Use a variável `summary`** para conteúdo personalizado
   - O `summary` é a variável pós-chamada que contém o resumo gerado pela IA
   - **Você pode escrever texto personalizado** + resumo dinâmico
   - **Exemplo**: "Obrigado pelo seu tempo! Aqui está um resumo da nossa conversa: {summary}. Qualquer dúvida, é só ligar para (81) 99999-9999"

<Note>
A variável `summary` é preenchida automaticamente após cada chamada com base na discussão da conversa e será única para cada interação com o cliente.
</Note>

<video
  autoPlay
  muted
  loop
  playsinline
  src="/resources/tutorials/post-call-sms/19-test-sms-action.mp4"></video>

3. **Teste a ação de SMS:**
   - **Clique em "Test Step"** para enviar um SMS de teste usando seus dados de chamada
   - **Verifique a entrega bem-sucedida** nos resultados do teste
   - **Confira seu celular** para receber a mensagem SMS real
   - **Confirme que o conteúdo da mensagem** inclui o resumo da chamada

## Passo 9: Números Brasileiros - Considerações de Formato
<Note>
**Importante para números brasileiros**: Use sempre o formato internacional completo (+55 DDD número). Exemplo: +5581999999999 ou +5511998887777. Não use parênteses, hífens ou zeros à esquerda no mapeamento.
</Note>

- Certifique-se de que a variável de telefone do cliente esteja no formato E.164 (+55XXXXXXXXXXX)
- Teste com números reais brasileiros para garantir a entrega correta

## Passo 10: Publicar e Ativar a Automação

<Frame>
  <img src="/resources/tutorials/post-call-sms/20-publish-automation.png" alt="Publishing the automation" />
</Frame>

1. **Clique em "Publish"** para ativar sua automação
2. **Sua automação de SMS pós-chamada agora está no ar e pronta**

**O que acontece agora:**
- **Após cada chamada** com o assistente selecionado
- **Se o objetivo foi alcançado** (`status` = true)
- **O cliente receberá automaticamente um SMS** com o resumo da chamada
3. **Monitore o desempenho da automação:**
   - **Clique em "Runs"** para ver o histórico de execuções
   - **Verifique a entrega dos SMS** para chamadas bem-sucedidas
   - **Monitore execuções com falha**
   - **Acompanhe quais chamadas acionaram SMS** vs quais não

<Tip>
A partir de agora, após cada chamada com objetivo alcançado, o cliente receberá um SMS automaticamente. Isso melhora a consistência do acompanhamento e o engajamento do cliente.
</Tip>

### Rastreamento de Entrega de SMS
Monitore a efetividade da sua automação de SMS:
- **Taxa de entrega**: Acompanhe entregas bem-sucedidas
- **Taxa de resposta**: Monitore engajamento dos clientes
- **Tratamento de opt-out**: Respeite as preferências dos clientes

## Melhores Práticas

### Conteúdo da Mensagem
- **Mantenha as mensagens curtas** e valiosas
- **Personalize com dados da chamada** quando relevante
- **Inclua próximos passos claros** ou informações de contato

### Considerações de Horário
- **Envie imediatamente** após chamadas bem-sucedidas para melhor engajamento
- **Considere fusos horários** da sua base de clientes
- **Evite mensagens em horários noturnos** a menos que adequado para o seu negócio

## Solução de Problemas

### Problemas Comuns

**SMS não está sendo enviado:**
- Verifique se o número tem capacidade de SMS
- Confirme o formato do número do cliente (+5581999999999)
- Certifique-se de que a ação de SMS está no branch correto

**Automação não está sendo acionada:**
- Confirme que o webhook está habilitado nas configurações do assistente
- Verifique se a automação está publicada e ativa
- Certifique-se de que as chamadas estão sendo concluídas com sucesso

**Conteúdo da mensagem errado:**
- Verifique o mapeamento de variáveis no conteúdo do SMS
- Confirme que as variáveis pós-chamada estão sendo extraídas
- Teste com diferentes cenários de chamada

## Próximos Passos
Quando sua automação básica de SMS estiver funcionando:
- **Adicione automação de e-mail** para acompanhamento adicional
- **Crie mensagens diferentes** para diferentes resultados de chamada
- **Integre com sistemas de CRM** para registrar comunicações
- **Configure análises avançadas** para rastrear engajamento
- **Faça testes A/B** com diferentes modelos de mensagem para resultados ótimos

Seus clientes agora receberão mensagens SMS personalizadas após chamadas bem-sucedidas, melhorando o engajamento e a consistência do acompanhamento!
